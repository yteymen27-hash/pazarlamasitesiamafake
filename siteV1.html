<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Pazarlama Sitesi Editörü (Lokal)</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; display: flex; height: 100vh; margin: 0; background-color: #f4f7f6; }
        
        /* SOL PANEL: Editör Alanı */
        #editor-panel { width: 350px; flex-shrink: 0; background-color: #ffffff; padding: 20px; box-shadow: 2px 0 5px rgba(0,0,0,0.1); overflow-y: auto; }
        #editor-panel h2 { color: #333; border-bottom: 2px solid #5d9cec; padding-bottom: 10px; margin-top: 0; }
        label { display: block; margin-top: 15px; margin-bottom: 5px; font-weight: bold; color: #555; }
        input[type="text"], textarea { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; font-size: 14px; }
        textarea { resize: vertical; height: 80px; }
        
        /* Görsel Önizleme */
        #image-preview-container { text-align: center; margin-top: 10px; border: 1px dashed #ccc; padding: 10px; border-radius: 4px; }
        #image-preview { max-width: 100%; max-height: 150px; display: none; border-radius: 4px; }

        /* Butonlar */
        #add-button { background-color: #5d9cec; color: white; padding: 12px 20px; border: none; border-radius: 4px; margin-top: 20px; cursor: pointer; width: 100%; font-size: 16px; transition: background-color 0.3s; }
        #add-button:hover { background-color: #4a8ad8; }
        
        /* SAĞ PANEL: Site Önizlemesi */
        #preview-panel { flex-grow: 1; padding: 20px; overflow-y: auto; }
        #preview-panel h1 { text-align: center; color: #333; margin-bottom: 30px; }
        #product-container { display: flex; flex-wrap: wrap; gap: 25px; justify-content: flex-start; }
        
        /* Ürün Kartı Stili */
        .product-card { background-color: white; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.05); width: 300px; overflow: hidden; transition: transform 0.3s; }
        .product-card:hover { transform: translateY(-5px); }
        .product-image { width: 100%; height: 200px; object-fit: cover; border-bottom: 1px solid #eee; cursor: pointer; } 
        .product-info { padding: 15px; }
        .product-info h3 { margin-top: 0; margin-bottom: 10px; color: #333; font-size: 1.4em; }
        .product-info p { margin-bottom: 10px; color: #666; font-size: 0.9em; }
        .product-price { font-size: 1.5em; font-weight: bold; color: #e74c3c; margin-top: 15px; }

        /* --- MODAL (POP-UP PENCERE) STİLLERİ --- */
        .modal {
            display: none; /* Başlangıçta gizli */
            position: fixed; 
            z-index: 100; /* Her şeyin üzerinde görünmesi için */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.6); /* Yarı saydam arka plan */
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 30px;
            border: 1px solid #888;
            border-radius: 10px;
            width: 80%; /* Genişlik ayarı */
            max-width: 500px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            text-align: center;
        }

        .close-btn {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            line-height: 1;
        }

        .close-btn:hover,
        .close-btn:focus {
            color: #333;
            text-decoration: none;
            cursor: pointer;
        }

        .contact-detail {
            font-size: 1.2em;
            margin: 15px 0;
            padding: 10px;
            background-color: #f0f8ff;
            border-radius: 5px;
            border-left: 5px solid #5d9cec;
        }

        .contact-detail strong {
            color: #333;
            display: block;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>

    <div id="editor-panel">
        <h2>Yeni Ürün Ekle</h2>
        
        <label for="product-name">Ürün Adı:</label>
        <input type="text" id="product-name" placeholder="Örn: Barbie Pembe Elbise">

        <label for="product-description">Açıklama:</label>
        <textarea id="product-description" placeholder="Ürünün detayları ve özellikleri..."></textarea>

        <label for="product-price">Fiyat:</label>
        <input type="text" id="product-price" placeholder="Örn: 150 TL">
        
        <label for="seller-name">Satan Kişi/Mağaza Adı:</label>
        <input type="text" id="seller-name" placeholder="Örn: Elif'in Butiği">
        
        <label for="contact-number">İletişim Numarası:</label>
        <input type="text" id="contact-number" placeholder="Örn: 05xx xxx xx xx">

        <label for="product-image-upload">Ürün Görseli Yükle:</label>
        <input type="file" id="product-image-upload" accept="image/*">
        
        <div id="image-preview-container">
            <img id="image-preview" src="" alt="Görsel Önizlemesi">
            <span id="no-image-text">Görsel seçilmedi</span>
        </div>

        <button id="add-button">Ürünü Siteye Ekle</button>
    </div>

    <div id="preview-panel">
        <h1>✨ Pazarlama Kataloğum ✨</h1>
        <div id="product-container">
            </div>
    </div>

    <div id="contactModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <h2>İletişim Bilgileri</h2>
            <h3 id="modalProductName"></h3>
            
            <div class="contact-detail">
                <strong>Satıcı/Mağaza Adı:</strong>
                <p id="modalSellerName"></p>
            </div>
            
            <div class="contact-detail">
                <strong>İletişim Numarası:</strong>
                <p id="modalContactNumber"></p>
            </div>
            
            <p style="margin-top: 25px;">Lütfen alıcı/satıcı güvenliğine dikkat ediniz.</p>
        </div>
    </div>
    <script>
        const nameInput = document.getElementById('product-name');
        const descInput = document.getElementById('product-description');
        const priceInput = document.getElementById('product-price');
        const sellerNameInput = document.getElementById('seller-name');
        const contactNumberInput = document.getElementById('contact-number');
        
        const imageUpload = document.getElementById('product-image-upload');
        const imagePreview = document.getElementById('image-preview');
        const noImageText = document.getElementById('no-image-text');
        const addButton = document.getElementById('add-button');
        const productContainer = document.getElementById('product-container');
        
        // Modal elemanları
        const modal = document.getElementById('contactModal');
        const modalProductName = document.getElementById('modalProductName');
        const modalSellerName = document.getElementById('modalSellerName');
        const modalContactNumber = document.getElementById('modalContactNumber');
        
        let selectedImageBase64 = ''; 

        // --- 1. Görsel Yükleme ve Önizleme ---
        imageUpload.addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    selectedImageBase64 = e.target.result; 
                    imagePreview.src = selectedImageBase64;
                    imagePreview.style.display = 'block';
                    noImageText.style.display = 'none';
                };
                reader.readAsDataURL(file);
            } else {
                imagePreview.style.display = 'none';
                noImageText.style.display = 'block';
                selectedImageBase64 = '';
            }
        });

        // --- 2. Ürün Ekleme Fonksiyonu ---
        addButton.addEventListener('click', () => {
            const name = nameInput.value.trim();
            const description = descInput.value.trim();
            const price = priceInput.value.trim();
            const sellerName = sellerNameInput.value.trim();
            const contactNumber = contactNumberInput.value.trim();
            
            if (!name || !description || !price || !selectedImageBase64 || !sellerName || !contactNumber) {
                alert("Lütfen tüm alanları doldurun ve bir görsel yükleyin.");
                return;
            }

            // Yeni Ürün Kartı Oluşturma
            const productCard = document.createElement('div');
            productCard.className = 'product-card';
            
            // Görsele tıklandığında showContactModal fonksiyonunu çağırıyoruz
            productCard.innerHTML = `
                <img 
                    src="${selectedImageBase64}" 
                    alt="${name}" 
                    class="product-image" 
                    title="İletişim için tıklayın"
                    onclick="showContactModal(this)" 
                    data-seller="${sellerName}"
                    data-contact="${contactNumber}"
                >
                <div class="product-info">
                    <h3>${name}</h3>
                    <p>${description}</p>
                    <div class="product-price">${price}</div>
                </div>
            `;

            productContainer.appendChild(productCard);

            // Formu Temizle
            nameInput.value = '';
            descInput.value = '';
            priceInput.value = '';
            sellerNameInput.value = '';
            contactNumberInput.value = '';
            imageUpload.value = '';
            imagePreview.style.display = 'none';
            noImageText.style.display = 'block';
            selectedImageBase64 = '';
            alert(`${name} ürünü başarıyla eklendi!`);
        });

        // --- 3. Modal Pencereyi Açma Fonksiyonu ---
        function showContactModal(imageElement) {
            // Görselden bilgileri al
            const seller = imageElement.getAttribute('data-seller');
            const contact = imageElement.getAttribute('data-contact');
            const productName = imageElement.getAttribute('alt');
            
            // Modal içindeki yerleri doldur
            modalProductName.textContent = productName;
            modalSellerName.textContent = seller;
            modalContactNumber.textContent = contact;
            
            // Modalı görünür yap
            modal.style.display = "flex"; // flex kullanarak ortalama
        }

        // --- 4. Modal Pencereyi Kapatma Fonksiyonu ---
        function closeModal() {
            modal.style.display = "none";
        }
        
        // Modal dışına tıklandığında kapatma
        window.onclick = function(event) {
            if (event.target == modal) {
                closeModal();
            }
        }

        // Fonksiyonları global kapsamda kullanılabilir yap
        window.showContactModal = showContactModal;
        window.closeModal = closeModal;

    </script>
</body>
</html>